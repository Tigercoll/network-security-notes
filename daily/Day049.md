---
title: Day049：网络防护 - 周综合实验与测评（网络防护）
tags:
  - 网络
  - 安全
  - 学习计划
categories:
  - 网络安全
abbrlink: 53a10946
date: 2026-02-11 00:00:00
updated: 2026-02-11 00:00:00
---

# Day049：网络防护 - 周综合实验与测评（网络防护）

- 日期：2026-02-11
- 周次：第7周

## 学习目标

今天你将完成**第 7 周综合实验**，整合本周网络防护知识：

- **防火墙实战**：配置规则并验证
- **IDS 部署**：检测并分析攻击
- **网络分段**：设计并实现隔离
- **周报汇总**：形成完整报告

---

<!--more-->

## 实践任务（合法授权范围内）

### 任务 1（必做）：综合防护演练

**目标**：对实验环境实施综合防护。

**步骤**：

```bash
#!/bin/bash
# 综合防护配置脚本

echo "=== 第7周综合防护演练 ==="

# 1. 配置防火墙
echo "[1/4] 配置防火墙规则..."
cat > firewall_setup.sh << 'EOF'
#!/bin/bash
iptables -F
iptables -P INPUT DROP
iptables -A INPUT -i lo -j ACCEPT
iptables -A INPUT -m state --state ESTABLISHED -j ACCEPT
iptables -A INPUT -p tcp --dport 22 -j ACCEPT
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -j ACCEPT
iptables -A INPUT -j LOG --log-prefix "DROP: "
EOF
chmod +x firewall_setup.sh
./firewall_setup.sh

# 2. 配置 IDS
echo "[2/4] 启动 Snort IDS..."
snort -i eth0 -c /etc/snort/snort.conf -A console &

# 3. 配置网络分段
echo "[3/4] 配置网络分段..."
# 创建实验用命名空间
ip netns add exp-ns 2>/dev/null || true

# 4. 记录配置
echo "[4/4] 记录配置..."
iptables -L -n > firewall_rules_$(date +%Y%m%d).txt

echo "=== 防护演练完成 ==="
```

### 任务 2（必做）：测试与验证

```bash
# 测试防火墙规则
echo "测试防火墙规则..."
nc -zv localhost 22  # 应该成功
nc -zv localhost 3306 # 应该被阻断

# 测试 IDS
echo "测试 IDS 检测..."
# 发送测试流量触发告警
curl "http://localhost/test' OR '1'='1" 2>/dev/null

# 查看告警
tail -20 /var/log/snort/alert

# 测试网络分段
echo "测试网络隔离..."
ip netns exec exp-ns ping -c 2 8.8.8.8
```

### 任务 3（必做）：撰写周报

```markdown
# 第7周网络防护周报

## 本周完成工作

| 任务 | 状态 | 耗时 |
|------|------|------|
| 防火墙规则配置 | ✅ 完成 | 1小时 |
| IDS 部署 | ✅ 完成 | 1小时 |
| 网络分段 | ✅ 完成 | 1小时 |
| 综合演练 | ✅ 完成 | 1小时 |

## 防护成果

### 防火墙
- 入站规则：5 条
- 默认策略：DROP
- 已阻断非法请求：XX 次

### IDS
- 检测规则：10+ 条
- 触发告警：X 次
- 误报率：X%

### 网络分段
- VLAN：3 个
- 命名空间：1 个

## 改进计划

1. 优化 IDS 规则，减少误报
2. 添加更多网络分段规则
3. 完善告警通知机制

## 下周计划

- 渗透测试方法论
- 内网横向移动
- 云与容器安全
```

---

## 评估标准（达成判定）

- ✅ 完成防火墙/IDS/分段的综合演练
- ✅ 撰写完整的周报
- ✅ 提出改进计划

---

## 学习成果达成情况（由学习者填写）

### 截图与证据

- [ ] 防火墙规则截图
- [ ] IDS 告警截图
- [ ] 网络分段测试截图
- [ ] 周报截图

### 关键命令与输出

```bash
# 防火墙规则
$ sudo iptables -L -n
Chain INPUT (policy DROP)
target     prot opt source               destination
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0            state RELATED,ESTABLISHED
ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0            tcp dpt:22
ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0            tcp dpt:80
```

### 结论与反思

**本周学习总结**：

- 掌握了防火墙、IDS、网络分段的核心知识
- 理解了零信任架构的基本理念
- 完成了综合防护演练

**技术收获**：

1. iptables/nftables 配置
2. Snort IDS 部署和使用
3. 网络分段设计
4. 变更管理流程

**不足与改进**：

- IDS 规则调优需要更多实践
- 零信任架构需要深入学习

**下周学习计划**：

- 渗透测试方法论
- 漏洞扫描与利用（授权环境）
- 云与容器安全

**本次实验耗时**：约 4 小时

**掌握程度自评**：

- [ ] 😕 理解了基本概念
- [ ] 🙂 完成了基础任务
- [ ] 😃 完成了所有任务并理解原理
- [ ] 🤩 深入研究了高级配置

---
