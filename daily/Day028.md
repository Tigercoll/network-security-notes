---
title: Day028：漏洞扫描与基线 - 周综合实验与测评
tags:
  - 网络
  - 安全
  - 学习计划
categories:
  - 网络安全
abbrlink: c3d4e
date: 2026-02-19
updated: 2026-02-19
---

# Day028：漏洞扫描与基线 - 周综合实验与测评

- **日期**：2026-02-19
- **周次**：第 4 周
- **模块**：漏洞扫描与基线
- **主题**：周综合实验与测评
- **预计学习时间**：3 小时

---

## 🎯 学习目标

学完今天你应该能做到：

- **融会贯通**：把本周学的 CVE、Nmap、Burp、SQLi 串成一条线。
- **实战演练**：完成一次完整的“迷你渗透测试”。
- **查漏补缺**：通过复盘发现自己的知识盲区。

<!--more-->

---

## 📚 完整学习内容（必读）

本节包含今天需要学习的全部知识点，请认真阅读并理解。

### 一、概念理解

#### 1.1.1 什么是渗透测试链 (Kill Chain)？
黑客攻击不是乱打一气，而是有步骤的：
1.  **侦察 (Recon)**：找 IP，找域名（Day 23）。
2.  **扫描 (Scan)**：找端口，找漏洞（Day 24）。
3.  **利用 (Exploit)**：SQLi, XSS, Upload（Day 26/27）。
4.  **后渗透 (Post-Exploit)**：提权、持久化（下周内容）。

#### 1.1.2 为什么要做综合实验？
之前的实验都是孤立的（只练注入、只练上传）。今天我们要把它们串起来：
先用 Nmap 发现 Web 服务 -> 用 Burp 抓包分析 -> 发现注入点 -> 拿到管理员密码 -> 登录后台 -> 上传 Webshell。

### 二、综合场景实验：从 0 到 1 攻破 DVWA

**目标**：不看答案，独立完成以下攻击链。
**环境**：DVWA (Security: Low/Medium)

#### 步骤 1：信息搜集
-   **任务**：确认靶机 IP，扫描开放端口。
-   **工具**：`nmap -sV <ip>`
-   **预期**：发现 80 端口开放 HTTP 服务。

#### 步骤 2：漏洞扫描
-   **任务**：用 Nmap 脚本或 Nessus 扫描 Web 服务。
-   **工具**：`nmap --script=http-enum <ip>`
-   **预期**：发现 `/dvwa/` 目录和 `login.php`。

#### 步骤 3：暴力破解
-   **任务**：进入登录页，用 Burp 爆破 `admin` 的密码。
-   **工具**：Burp Intruder + 弱口令字典。
-   **预期**：成功爆破出密码（默认是 `password`），成功登录。

#### 步骤 4：漏洞利用 (SQLi)
-   **任务**：在 SQL Injection 模块，获取当前数据库用户名。
-   **Payload**：`' UNION SELECT user(), database() #`
-   **预期**：显示 `admin@localhost`。

#### 步骤 5：漏洞利用 (XSS)
-   **任务**：在 XSS Stored 模块，留一个后门，让每个访问者都弹窗。
-   **Payload**：`<script>alert('Hacked by me')</script>`
-   **预期**：每次刷新页面都会弹窗。

#### 步骤 6：漏洞利用 (Upload -> GetShell)
-   **任务**：上传一个 WebShell，并用蚁剑连接。
-   **Payload**：`<?php @eval($_POST['ant']); ?>`
-   **预期**：上传成功，蚁剑连接成功，可以浏览服务器文件。

### 三、深度思考：防御者的视角

作为攻击者，你觉得很爽。但如果你是防御者（蓝队），你应该怎么做？

1.  **对于爆破**：加验证码，限制登录失败次数（锁定 IP）。
2.  **对于注入**：全站上预编译（Prepared Statements）。
3.  **对于 XSS**：全站输出进行 HTML 实体编码，开启 HttpOnly Cookie。
4.  **对于上传**：白名单限制后缀，上传目录禁止执行权限，文件重命名。

### 四、进阶知识（选学）

#### 1.4.1 自动化渗透工具
虽然我们学的是手工测试，但实战中通常会用自动化工具辅助：
-   **SQLMap**：全自动 SQL 注入工具。
-   **Xray/AWVS**：综合 Web 漏洞扫描器。
-   **Hydra**：全能爆破工具。

### 五、本日知识点速查表

| 序号 | 核心概念 | 关键点 | 备注 |
|------|----------|--------|------|
| 1 | **Kill Chain** | 攻击链 | 侦察->扫描->利用 |
| 2 | **SQLMap** | 自动化注入 | 效率神器 |
| 3 | **Hydra** | 自动化爆破 | 支持 SSH/FTP/Web |
| 4 | **WAF** | Web防火墙 | 它可以拦截大多数攻击 |

---

## 🗺️ 知识图谱

### 今日内容在整体知识体系中的位置

```
网络安全学习路径
├── 第 4 周：漏洞扫描与基线
│   ├── Day 22-27：各个击破
│   └── Day 28：综合演练
│       ├── 串联：Nmap -> Burp -> Exp
│       └── 复盘：从红队视角看防御
└── 后续衔接
    └── 第 5 周：渗透测试方法论 (PTES)
```

### 今日关键词

`Kill Chain` · `DVWA` · `Defense` · `Review`

---

## 🔧 实践任务（合法授权范围内）

> ⚠️ **安全提示**：请使用 DVWA 靶场进行测试。

请按顺序完成以下任务：

### 任务 1：SQLMap 初体验（选做）（20 分钟）

**操作步骤**：
1. 你的 DVWA SQL 注入页面的 URL（带上 Session Cookie）。
2. 使用命令：`sqlmap -u "http://xxx/vulnerabilities/sqli/?id=1&Submit=Submit" --cookie="security=low; PHPSESSID=xxx" --dbs`
3. **观察**：SQLMap 能不能自动跑出数据库名？

**预期结果**：自动列出数据库名称。

### 任务 2：漏洞修复演练（30 分钟）

**操作步骤**：
1. 打开 DVWA 源代码 (`/var/www/html/dvwa/vulnerabilities/sqli/source/low.php`)。
2. 尝试把 SQL 注入漏洞修好（用 `mysqli_real_escape_string` 或 PDO）。
3. 保存文件。
4. 回到网页再次测试注入，看是否还有效？

**预期结果**：注入失败，说明修复成功。

---

## 📝 巩固练习（题目与复盘）

### 练习 1：概念理解（5 分钟）

**题目**：CVSS 评分中，AV:N 代表什么？

**参考答案**：Attack Vector: Network（攻击向量：网络）。意味着攻击者可以远程通过互联网发起攻击，不需要物理接触或局域网接入。

### 练习 2：场景分析（5 分钟）

**题目**：你发现了一个 SQL 注入漏洞，但无论怎么注入页面都没有回显数据（Blind），这时你应该用什么工具最高效？

**参考答案**：**SQLMap**。盲注需要发送成千上万个请求来一位一位地猜数据，手工做会累死人，机器做最合适。

---

## ✅ 评估标准（达成判定）

- [ ] 我能独立完成 DVWA Low 级别的所有漏洞利用。
- [ ] 我知道如何修复这些漏洞。
- [ ] 我能画出一个简单的渗透测试流程图。

### 自检清单

- [ ] **综合能力**：遇到一个新网站，知道第一步该干什么（信息搜集）。
- [ ] **工具使用**：Nmap 和 Burp 配合娴熟。
- [ ] **防御意识**：看到漏洞能想到修复方案。

### 学习进度自评

| 评估项目 | 1-5 星 | 备注 |
|----------|--------|------|
| 综合实战 | ⭐⭐⭐⭐⭐ | |
| 修复能力 | ⭐⭐⭐⭐⭐ | |
| 工具联动 | ⭐⭐⭐⭐⭐ | |

---

## 📊 学习成果记录（由学习者填写）

### 学习信息

| 项目 | 内容 |
|------|------|
| 学习日期 | 2026-02-19 |
| 学习时长 | ___ 小时 |
| 完成情况 | ⬜ 已完成 / ⬜ 部分完成 / ⬜ 未完成 |

### 实践任务完成记录

| 任务 | 完成状态 | 关键证据/截图 |
|------|----------|---------------|
| 综合实验 | ⬜ 已完成 | 截图：GetShell 成功画面 |
| 任务 1 | ⬜ 已完成 | 截图：SQLMap 运行结果 |
| 任务 2 | ⬜ 已完成 | 代码：修复后的 PHP 代码片段 |

---

## 💡 知识卡片速查

### 渗透测试标准流程 (简版)

1.  **明确目标**：确定范围，拿授权。
2.  **信息搜集**：被动+主动。
3.  **漏洞发现**：扫描+手工。
4.  **漏洞利用**：拿到权限。
5.  **报告编写**：风险评估+修复建议。

---

## ❓ 常见问题与解答

**Q1：Web 安全学到什么程度算入门？**
A1：能独立通关 DVWA Low 和 Medium 级别，能看懂基本的 PHP 代码，会用 Burp 和 Nmap，就算入门了。

**Q2：下一步该学什么？**
A2：学**方法论**（怎么正规地做渗透），学**提权**（拿到 Shell 后怎么变 Root），学**内网渗透**（怎么从一台机器打穿整个局域网）。

---

## 🚀 下一步学习预告

**下周主题**：Week 05 - 渗透测试方法论与报告编写

**学习重点**：
- 渗透测试的标准流程 (PTES)。
- 如何写一份专业的渗透测试报告。
- 法律法规与职业道德。

**今日学习为明日做铺垫**：
- 技术你已经掌握了，下周我们要学习如何把技术变成“服务”和“价值”。

---

> 💬 **学习提示**：
> 1. 今天的实验很重要，建议反复做几遍，直到肌肉记忆。
> 2. 尝试去阅读 DVWA Medium 级别的代码，看看它是怎么防御的，思考怎么绕过。
> 3. **保持敬畏**：技术越强，责任越大。

```bash
git add daily/Day028.md
git commit -m "Day028: 完成学习与记录"
```
