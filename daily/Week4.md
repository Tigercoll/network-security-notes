---
title: Week 04：漏洞扫描与基线 - 周度总结
tags:
  - 学习总结
  - 阶段复盘
categories:
  - 网络安全
date: 2026-02-19
---

# Week 04：漏洞扫描与基线 - 周度总结

## 📅 本周学习概览

本周我们正式跨入了“进攻”的门槛。如果说前三周是在打地基（网络、加密、系统），那么这一周我们终于拿起了枪，瞄准了靶心。

我们学习了如何像黑客一样思考：从**情报搜集**开始，到使用**扫描器**寻找裂缝，再到深入 Web 应用的内部，利用 **SQL 注入**和 **XSS** 攻破防线。我们不仅学会了破坏，更深刻理解了“未知攻，焉知防”的道理。

<!--more-->

---

## 📚 每日核心知识回顾

### Day 022：漏洞类型与编号体系
- **CVE**：漏洞的身份证。
- **CVSS**：漏洞的体检单（评分）。10.0 分是核弹级。
- **NVD/CNVD**：查漏洞情报的数据库。永远不要忽视那些高危评分的漏洞。

### Day 023：信息搜集 (OSINT)
- **被动搜集**：Google Dorks, Whois, Shodan。悄无声息地画出目标画像。
- **主动搜集**：DNS 挖掘，寻找被遗忘的子域名。
- **核心逻辑**：攻击面往往隐藏在开发人员觉得“没人会发现”的角落（如测试环境、Git 泄露）。

### Day 024：主动扫描工具实战
- **Nmap**：诸神之眼。`-sS` 半连接扫描最常用，`-sV` 探测版本，`--script` 扫漏洞。
- **Nessus**：自动化体检报告。它能发现已知漏洞，但对逻辑漏洞无能为力。
- **误报与漏报**：扫描器不是万能的，人工验证才是关键。

### Day 025：Web 架构与 HTTP 协议
- **HTTP**：明文传输，无状态。
- **Burp Suite**：中间人神器。Intercept（拦截）、Repeater（重放）、Intruder（爆破）。
- **状态码**：200 OK, 302 跳转, 403 禁止, 500 报错。

### Day 026：常见 Web 漏洞 (1) - 注入与脚本
- **SQL 注入**：信任了用户的输入，导致数据变成了代码。`' or 1=1 --` 是万能钥匙。
  - **防御**：预编译 (Prepared Statements)。
- **XSS (跨站脚本)**：恶意 JS 代码在受害者浏览器里执行，窃取 Cookie。
  - **防御**：HTML 实体编码。

### Day 027：常见 Web 漏洞 (2) - 逻辑与配置
- **越权 (IDOR)**：改个 ID 就能看别人的照片。这是逻辑漏洞，扫描器扫不出。
- **文件上传**：上传一个 WebShell (`.php`)，直接接管服务器。
- **暴力破解**：弱口令是企业安全最大的敌人。

### Day 028：周综合实验 (DVWA)
- **实战串联**：从信息搜集到漏洞利用，完整走了一遍渗透测试流程。
- **攻防转换**：每一次攻击成功后，都要反思“如果我是管理员，该怎么防”。

---

## 📝 巩固练习题 (Level 4)

完成以下题目来检验你对第四周内容的掌握程度。

### 一、 概念速查（单选/简答）

1.  **CVSS 评分中，哪个指标代表“利用漏洞是否需要复杂的条件”？**
    A) Attack Vector (AV)
    B) Attack Complexity (AC)
    C) Privileges Required (PR)
    D) User Interaction (UI)

2.  **在使用 Nmap 时，如果不加任何参数，默认使用的是哪种扫描方式？**
    A) TCP Connect Scan (-sT)
    B) TCP SYN Scan (-sS)（但在无 root 权限时会降级）
    C) UDP Scan (-sU)
    D) FIN Scan

3.  **Burp Suite 的哪个模块最适合用来进行 SQL 注入的盲注测试（需要反复修改 Payload 并观察响应）？**
    A) Proxy
    B) Intruder
    C) Repeater
    D) Sequencer

4.  **防御 XSS 攻击最核心的措施是？**
    A) 过滤 `<script>` 标签
    B) 限制输入长度
    C) 对输出到 HTML 的内容进行实体编码
    D) 使用 HTTPS

5.  **以下哪个 Google Dork 语法可以用来查找名为 "passwords.txt" 的文件？**
    A) `site:passwords.txt`
    B) `filetype:txt inurl:passwords`
    C) `intext:passwords.txt`
    D) `intitle:index.of passwords.txt`

### 二、 场景分析（实战模拟）

6.  **场景：SQL 注入修复**
    开发人员修复了一个 SQL 注入漏洞，他写了一个函数 `filter()`，把用户输入里的 `'` (单引号) 替换为空。
    *   这种修复方式安全吗？
    *   如果不安全，黑客可能怎么绕过？（提示：如果是数字型注入 `id=1`，需要单引号吗？）

7.  **场景：Nessus 扫描结果分析**
    Nessus 报告显示目标服务器存在 "OpenSSL Heartbleed (CVE-2014-0160)" 高危漏洞。
    *   这意味着什么？
    *   你可以用什么 Nmap 脚本来快速验证这个漏洞是否存在？

8.  **场景：越权访问**
    你发现某电商网站的订单查询接口是 `/api/order?id=1000`。
    *   你是用户 A，你的订单号是 1000。
    *   你怎么测试是否存在水平越权漏洞？
    *   如果存在漏洞，你会看到什么？

### 三、 深度思考

9.  **为什么现在即使有了 WAF (Web 应用防火墙) 和各种扫描器，Web 安全事故依然层出不穷？**
    *   提示：从“逻辑漏洞”、“0day”、“配置错误”、“人的因素”等方面思考。

---

## 🔑 参考答案

### 一、 概念速查
1.  **B**。AC (Attack Complexity) 越低越危险。
2.  **B** (有 root 权限时) / **A** (无 root 权限时)。通常认为默认是 -sS。
3.  **C**。Repeater 是手动挖掘的神器。
4.  **C**。编码能确保浏览器只把数据当文本显示，不当代码执行。
5.  **D**。`intitle:index.of` 专门找目录遍历，配合文件名效果拔群。

### 二、 场景分析
6.  **不安全**。
    *   如果是**数字型注入**（如 `SELECT * FROM table WHERE id=$id`），根本不需要单引号闭合，直接输入 `1 or 1=1` 即可注入。
    *   黑客还可能使用宽字节注入或其他编码绕过黑名单。
    *   **唯一解**：参数化查询 (Prepared Statements)。
7.  **心脏滴血漏洞**。
    *   意味着服务器内存可能泄露，攻击者能读取内存中的敏感数据（如私钥、用户 Session）。
    *   验证命令：`nmap -p 443 --script=ssl-heartbleed <ip>`。
8.  **水平越权测试**。
    *   把 `id=1000` 改成 `id=1001`（假设这是别人的订单）。
    *   如果服务器返回了 1001 号订单的详细信息（收货地址、电话），说明存在 IDOR 漏洞。

### 三、 深度思考
9.  **因为安全是短板效应**。
    *   **逻辑漏洞**：WAF 很难理解业务逻辑（比如“把价格改成负数”对 WAF 来说是合法数字）。
    *   **新技术的引入**：API、微服务带来了新的攻击面。
    *   **人的因素**：管理员配错防火墙、开发人员为了赶进度关掉鉴权、员工使用弱口令。技术再强也防不住“内鬼”或“疏忽”。
