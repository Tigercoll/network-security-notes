# Day001：网络与协议基础 - 网络总览与模型

- 日期：2025-12-25
- 周次：第1周

## 学习目标
- 理解 OSI 与 TCP/IP 模型的层次与职责
- 认识常用网络术语（主机、接口、路由、网关、子网等）

## 学习内容

### 📚 OSI 七层模型详解

**OSI（Open Systems Interconnection，开放系统互连）**是国际标准化组织（ISO）制定的网络通信标准模型，将网络通信分为 7 层：

**第 7 层 - 应用层（Application Layer）**
- 职责：为应用程序提供网络服务接口
- 示例协议：HTTP、HTTPS、FTP、SMTP（邮件）、DNS、SSH
- 数据单位：数据（Data）
- 例子：浏览器访问网页时使用的 HTTP 协议

**第 6 层 - 表示层（Presentation Layer）**
- 职责：数据格式转换、加密解密、压缩解压
- 示例：SSL/TLS 加密、JPEG/GIF 图片编码、ASCII/Unicode 字符编码
- 数据单位：数据（Data）
- 例子：HTTPS 中的数据加密

**第 5 层 - 会话层（Session Layer）**
- 职责：建立、管理、终止会话连接
- 示例：NetBIOS、RPC（远程过程调用）
- 数据单位：数据（Data）
- 例子：视频会议时保持多个数据流的同步

**第 4 层 - 传输层（Transport Layer）**
- 职责：端到端的可靠传输、流量控制、错误检测
- 示例协议：TCP（可靠连接）、UDP（无连接快速）
- 数据单位：段（Segment - TCP）或数据报（Datagram - UDP）
- 关键概念：端口号（0-65535）
- 例子：HTTP 使用 TCP 80 端口，DNS 使用 UDP 53 端口

**第 3 层 - 网络层（Network Layer）**
- 职责：路由选择、IP 地址寻址、跨网络传输
- 示例协议：IP、ICMP（ping 命令）、路由协议（OSPF、BGP）
- 数据单位：数据包（Packet）
- 关键概念：IP 地址（如 192.168.2.5）
- 例子：路由器根据 IP 地址转发数据包

**第 2 层 - 数据链路层（Data Link Layer）**
- 职责：相邻节点间的数据传输、帧同步、错误检测
- 示例协议：以太网（Ethernet）、Wi-Fi（802.11）、PPP、ARP
- 数据单位：帧（Frame）
- 关键概念：MAC 地址（物理地址，如 C8-15-4E-A8-D3-FB）
- 例子：交换机根据 MAC 地址转发数据帧

**第 1 层 - 物理层（Physical Layer）**
- 职责：比特流传输、电气信号规范
- 示例：网线（RJ45）、光纤、无线电波、USB
- 数据单位：比特（Bit）
- 例子：网线中的电压信号、Wi-Fi 的无线电波

### 🌐 TCP/IP 四层模型详解

**TCP/IP** 是互联网实际使用的协议栈模型，比 OSI 更简化实用：

**第 4 层 - 应用层（Application Layer）**
- 对应 OSI：第 5、6、7 层（会话层+表示层+应用层）
- 示例协议：HTTP、FTP、SMTP、DNS、SSH、Telnet
- 说明：直接为用户应用提供服务

**第 3 层 - 传输层（Transport Layer）**
- 对应 OSI：第 4 层
- 示例协议：TCP、UDP
- 说明：端到端通信，TCP 可靠，UDP 快速

**第 2 层 - 网络层/互联网层（Internet Layer）**
- 对应 OSI：第 3 层
- 示例协议：IP、ICMP、ARP
- 说明：IP 寻址和路由

**第 1 层 - 网络接口层（Network Interface Layer）**
- 对应 OSI：第 1、2 层（物理层+数据链路层）
- 示例：以太网、Wi-Fi
- 说明：物理网络硬件接口

### 📊 OSI 与 TCP/IP 映射对照表

```
OSI 七层模型          TCP/IP 四层          协议示例              数据单位
─────────────────────────────────────────────────────────────
7. 应用层    ┐                           HTTP, FTP, DNS
6. 表示层    ├──────→  应用层            SMTP, SSH, Telnet      数据
5. 会话层    ┘                           

4. 传输层    ────────→  传输层           TCP, UDP               段/数据报

3. 网络层    ────────→  网络层           IP, ICMP, ARP          数据包

2. 数据链路层 ┐
             ├──────→  网络接口层        以太网, Wi-Fi          帧/比特
1. 物理层    ┘
```

### 🔄 数据封装与解封装过程

当你访问网页 http://www.baidu.com 时，数据经过以下封装：

```
[应用层] HTTP 请求报文："GET / HTTP/1.1"
    ↓ 添加 TCP 头部
[传输层] TCP 段（源端口、目标端口 80、序列号、确认号）
    ↓ 添加 IP 头部
[网络层] IP 数据包（源 IP: 192.168.2.5、目标 IP: 百度服务器）
    ↓ 添加以太网帧头
[数据链路层] 以太网帧（源 MAC、目标 MAC: 网关 MAC）
    ↓ 转换为信号
[物理层] 无线电波/电信号 → 比特流传输
```

接收端进行相反的解封装过程，逐层剥离头部，最终得到 HTTP 响应数据。

## 实践任务（合法授权范围内）
- 在本机使用 ipconfig/ifconfig 查看网络配置，识别网关与子网掩码
- 画出本地网络示意图（主机、交换机/路由器、网关）

## 巩固练习（题与复盘）

### 练习 1：用自己的话总结 OSI 与 TCP/IP 的层级映射

**答案**：
- OSI 的应用层、表示层、会话层（上三层）合并为 TCP/IP 的应用层
- OSI 的传输层对应 TCP/IP 的传输层
- OSI 的网络层对应 TCP/IP 的网络层
- OSI 的数据链路层和物理层（下两层）合并为 TCP/IP 的网络接口层
- **简记**：OSI 7层 → TCP/IP 4层（3+1+1+2 = 4）

### 练习 2：小测 - 指出 HTTP/TCP/IP/以太网分别位于哪一层

| 协议/技术 | OSI 模型 | TCP/IP 模型 | 说明 |
|---------|---------|------------|-----|
| **HTTP** | 第 7 层（应用层） | 第 4 层（应用层） | 网页传输协议 |
| **TCP** | 第 4 层（传输层） | 第 3 层（传输层） | 可靠传输协议 |
| **IP** | 第 3 层（网络层） | 第 2 层（网络层） | 网络寻址协议 |
| **以太网** | 第 2 层（数据链路层） | 第 1 层（网络接口层） | 局域网技术 |

## 评估标准（达成判定）
- 能正确解释每层的职责并给出示例协议
- 能根据输出识别本机网络的关键参数

## 学习成果达成情况（由学习者填写）
- 截图与证据：已完成网络配置查看
- 关键命令与输出：
  ```powershell
  # 查看详细网络配置
  ipconfig /all
  # 输出显示：
  # - 活动网络接口：WLAN 3（Intel Wi-Fi 6E AX210）
  # - IPv4 地址：192.168.2.5
  # - 子网掩码：255.255.255.0
  # - 默认网关：192.168.2.1
  # - DHCP 服务器：192.168.2.1
  # - DNS 服务器：192.168.2.1
  # - 物理地址（MAC）：C8-15-4E-A8-D3-FB
  
  # 查看路由表
  route print
  # 默认路由：0.0.0.0 -> 192.168.2.1（所有非本地网络流量都转发到网关）
  ```

- 结论与反思：
  - ✅ **网络拓扑理解**：本机通过 Wi-Fi 连接到家庭路由器（192.168.2.1），路由器作为默认网关负责将流量转发到互联网
  - ✅ **OSI/TCP-IP 层次映射**：
    - 应用层：HTTP、DNS 等应用协议
    - 传输层：TCP/UDP（端口通信）
    - 网络层：IP 协议（192.168.2.5 地址）
    - 数据链路层：以太网/Wi-Fi（MAC 地址 C8-15-4E-A8-D3-FB）
    - 物理层：无线电波信号
  - ✅ **关键术语理解**：
    - **主机**：本机 192.168.2.5
    - **接口**：WLAN 3 无线网卡
    - **网关**：192.168.2.1（路由器）
    - **子网**：192.168.2.0/24（可容纳 254 个主机）
    - **子网掩码**：255.255.255.0（定义网络和主机部分）
  - 📊 **本地网络示意图**：
    ```
    互联网
      ↑
    [路由器/网关 192.168.2.1] ← DHCP + DNS 服务器
      ↓ (无线)
    [本机 WLAN 3: 192.168.2.5]
    子网：192.168.2.0/24
    ```
  - 💡 **扩展思考**：路由表中 0.0.0.0/0 是默认路由，匹配所有不在本地网络的流量；DHCP 自动分配 IP，租约为 24 小时
  
### 📝 巩固练习完成情况

**练习 1 - OSI 与 TCP/IP 层级映射总结**：
- ✅ 已理解：TCP/IP 是 OSI 的简化实用版本
- ✅ 映射关系：OSI 上三层合并为应用层，中间两层一一对应，下两层合并为网络接口层

**练习 2 - 协议层次判断**：
- ✅ HTTP（应用层）→ TCP（传输层）→ IP（网络层）→ 以太网（数据链路层）
- ✅ 理解：访问网页时，HTTP 数据依次被 TCP、IP、以太网封装，形成"洋葱模型"

**数据封装实例理解**：
```
访问百度的过程：
1. 应用层：生成 HTTP GET 请求
2. 传输层：TCP 添加端口信息（源端口随机，目标端口 80）
3. 网络层：IP 添加地址（源 192.168.2.5，目标百度 IP）
4. 数据链路层：以太网添加 MAC 地址（目标是网关 MAC）
5. 物理层：Wi-Fi 无线电波传输
6. 数据到达网关后，网关剥离以太网帧，根据 IP 路由到下一跳
```
